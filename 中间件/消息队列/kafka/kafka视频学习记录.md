设计理念：  
原来是想设计一个大型的存储数据的系统，类似于非关系型数据库（分布式设计，便于扩展），此外还支持持续变化的不断增长的数据流，可以发布和订阅数据流（消息中间件的功能只是kafka功能的一部分）。  

基本概念：  
Broker：kafka所在的服务器  
Topic：
partition：  
偏移量：kafka设计之初是一个存储系统，数据不会在消费后删除（不同于其他消息中间件），会被持久化，偏移量就是用来记录数据被消费到哪里了，这也是为什么一个分区只能同时被一个消费者消费（理论上是可以实现同时被多个消费者消费的，但是复杂）
生产者：  
消费者：  
消费者分组：  

使用场景（适用？/优缺点）：  
基于磁盘的数据存储，持久化可靠，且不影响性能  
高伸缩性，集群扩展性能好  
适用于收集指标和日志（数据量大，刷新频繁），提交日志（操作日志）  

缺点：  
运维难度大，要使用到极致的性能，非常有难度的  
对zookeeper的依赖极高  
多副本的模式下，对网络的要求也有较高的要求  
数据偶尔会有混乱的情况  

常见的重要参数：  
log.dirs: 日志文件存储地址， 可以设置多个  
num.recovery.threads.per.data.dir：用来读取日志文件的线程数量，对应每一个log.dirs 若此参数为2 log.dirs 为2个目录 那么就会有4个线程来读取  
auto.create.topics.enable:是否自动创建tiopic  
num.partitions: 创建topic的时候自动创建多少个分区 (可以在创建topic的时候手动指定)  
log.retention.hours: 日志文件保留时间 超时即删除  
log.retention.bytes: 日志文件最大大小  
log.segment.bytes: 当日志文件达到一定大小时，开辟新的文件来存储(分片存储)  
log.segment.ms: 同上 只是当达到一定时间时 开辟新的文件  
message.max.bytes: broker能接收的最大消息大小(单条) 默认1M  


同一台服务器搭建集群：  
先启动zookeeper  
修改配置文件：  
broker id（必须）  
监听地址（单机）
日志文件路径（单机）  
zookeeper注册地址（可选）  





