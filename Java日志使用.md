一、日志概览
=  
1.日志是干什么的
-  
日志用来记录程序的运行轨迹，方便查找关键信息和快速定位解决问题。（开发的时候，我们可以使用IDE进行debug，但是测试与生产环境下就不行了，好的日志可以快速单位问题解决问题）  

2.日志有什么用
-  
问题追踪、状态监控、安全审计

二、日志使用  
=  
1.常用框架
-  
### 2.1.1Logging  
Java自带的日志工具类，基本没人在使用了已经。  
### 2.1.2commons-logging  
日志门面接口，用户选择不同日志实现框架，不必改动日志定义，面向接口抽象编程，少有人用已经。  
### 2.1.3slf4j  
为Java提供的简单日志facade（接口，众多接口的集合，不负责实现，只负责找合适的日志系统进行绑定），允许根据自己的喜好接入不同的日志系统（slf4j-api）。  
### 2.1.4Log4j  
开源日志框架，最为广泛的应用框架。（停止维护，切换至log4j2）  
### 2.1.5Log4j2  
Log4j升级版，不兼容Log4j  
### 2.1.6Logback  
Log4j的原生框架，出于同一人之手，但更多的有点、特性和更强的性能，代替Log4j成为主流。


选择原则：
没有最好，只有合适不合适。
关注高性能：slf4j + logback  
已经使用log4j，继续使用更好：slf4j + log4j2  
不想有依赖，java.util.logging或框架容器已经提供的日志接口  

三、什么时候使用日志
=  
乱用日志的后果：有效的日志信息被无效的日志信息淹没，日志失去应该有的效果。  

常见的需要日志的点：
* 编程语言提示异常
* 业务流程预期不符合（参数是否正确，处理数据问题导致返回码不在合理范围等等）
* 系统核心角色，组件关键动作（核心数据表增删改；核心组件运行）
* 系统初始化，系统或者服务的启动参数  

四、日志最佳实践（使用约定）
=  
4.1日志变量的定义
-
日志变量往往不变，一个类只有一个log对象，有父类就定义在父类中。  
```
private static final Logger log = LoggerFactory.getLogger({SimpleClassName}.getClass());
```  
这里使用Logger，是因为log4j、logback等日志实现框架，实现了slf4j的门面接口（推荐引入lombok依赖，类头部注解@slf4j，可以使用log变量打印日志，代码更简洁）  

4.2参数占位格式
-  
使用参数化形式{}占位，[]进行参数隔离  
```
log.debug("Save order with order no：[{}], and order amount：[{}]");  
log.debug("Save order with order no：[{}], and order amount：[{}]");
```  
若日志不支持参数化，且日志输出不支持该日志级别会导致对象的冗余创建，浪费内存，使用isXXEnable（）进行判断  
```
if(log.isDebugEnabled()){
    // 如果日志不支持参数化形式，debug又没开启，那字符串拼接就是无用的代码拼接，影响系统性能  
    log.debug("Save order with order no：" + orderNo + ", and order amount：" + orderAmount);
}
```  

4.3日志的格式
-  
主要包括内容如下： 
* 日志事件  

* 日志级别  

* 调用链标识（可选）  

* 线程名称  

* 日志记录器名称  

* 日志内容  

* 异常堆栈（不一定有）  
















